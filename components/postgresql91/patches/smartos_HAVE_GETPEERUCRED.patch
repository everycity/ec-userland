# This patch fixes the following error on smartos:

#In file included from /usr/include/sys/procfs.h:50,
#                 from /usr/include/sys/ucred.h:33,
#                 from /export/home/alasdair/s10-userland/components/postgresql91/postgresql-9.1.1/src/port/getpeereid.c:27:
# /usr/include/sys/old_procfs.h:52:2: error: #error "Cannot use procfs in the large file compilation environment"

--- postgresql-9.1.10/configure.in.orig	2013-10-08 04:13:47.000000000 +0100
+++ postgresql-9.1.10/configure.in	2013-10-16 11:58:18.012525626 +0100
@@ -19,10 +19,6 @@
 
 AC_INIT([PostgreSQL], [9.1.10], [pgsql-bugs@postgresql.org])
 
-m4_if(m4_defn([m4_PACKAGE_VERSION]), [2.63], [], [m4_fatal([Autoconf version 2.63 is required.
-Untested combinations of 'autoconf' and PostgreSQL versions are not
-recommended.  You can remove the check from 'configure.in' but it is then
-your responsibility whether the result works or not.])])
 AC_COPYRIGHT([Copyright (c) 1996-2011, PostgreSQL Global Development Group])
 AC_CONFIG_SRCDIR([src/backend/access/common/heaptuple.c])
 AC_CONFIG_AUX_DIR(config)
@@ -1002,10 +998,10 @@
 
 # On OpenBSD, test for sys/ucred.h will fail unless sys/param.h
 # is included first.
-AC_CHECK_HEADERS(sys/ucred.h, [], [],
-[AC_INCLUDES_DEFAULT
+#AC_CHECK_HEADERS(sys/ucred.h, [], [],
+#[AC_INCLUDES_DEFAULT
 #include <sys/param.h>
-])
+#])
 
 # At least on IRIX, test for netinet/tcp.h will fail unless
 # netinet/in.h is included first.
