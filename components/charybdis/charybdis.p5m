#
# This file and its contents are supplied under the terms of the
# Common Development and Distribution License ("CDDL)". You may
# only use this file in accordance with the terms of the CDDL.
#
# A full copy of the text of the CDDL should have accompanied this
# source. A copy of the CDDL is also available via the Internet at
# http://www.illumos.org/license/CDDL.
#

#
# Copyright 2012 EveryCity Ltd. All rights reserved.
#

# Transforms
<include ec-drop-common>
<transform file path=.*/etc/.* -> default preserve true>
<transform file path=.*/etc/.* -> default mode 0644>
<transform dir path=.+/modules-old -> drop>
<transform file path=.+/modules-old/.* -> drop>
<transform file path=.+\.old -> drop>

set name=pkg.fmri value=pkg:/irc/server/charybdis@$(IPS_COMPONENT_VERSION),$(BUILD_VERSION)
set name=pkg.summary value="A powerful IRC daemon, based on ircd-ratbox."
set name=info.upstream_url value="http://www.atheme.org/project/charybdis"
set name=info.source_url value=$(COMPONENT_ARCHIVE_URL)

license charybdis.license license="GPLv2"

file path=$(USRDIR)/lib/charybdis/bandb
file path=$(USRDIR)/lib/charybdis/bantool
file path=$(USRDIR)/lib/charybdis/convertilines
file path=$(USRDIR)/lib/charybdis/convertklines
file path=$(USRDIR)/lib/charybdis/genssl.sh
file path=$(USRDIR)/lib/charybdis/ircd
file path=$(USRDIR)/lib/charybdis/mkpasswd
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_accept.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_admin.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_away.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_cap.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_capab.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_certfp.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_challenge.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_chghost.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_close.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_cmessage.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_connect.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_dline.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_encap.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_etrace.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_help.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_info.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_invite.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_ison.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_kline.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_knock.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_links.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_list.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_locops.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_lusers.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_map.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_monitor.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_motd.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_names.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_oper.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_operspy.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_pass.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_ping.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_pong.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_post.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_privs.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_rehash.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_restart.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_resv.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_sasl.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_scan.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_services.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_set.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_signon.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_snote.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_stats.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_svinfo.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_tb.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_testline.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_testmask.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_tginfo.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_time.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_topic.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_trace.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_unreject.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_user.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_userhost.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_users.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_version.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_wallops.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_who.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_whois.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_whowas.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/m_xline.so
file path=$(USRDIR)/lib/charybdis/modules/autoload/sno_routing.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/chm_adminonly.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/chm_operonly.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/chm_operonly_compat.so
file \
    path=$(USRDIR)/lib/charybdis/modules/extensions/chm_quietunreg_compat.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/chm_sslonly.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/chm_sslonly_compat.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/createauthonly.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/createoperonly.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/example_module.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_account.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_canjoin.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_channel.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_extgecos.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_oper.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_realname.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_server.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_ssl.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/extb_usermode.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/force_user_invis.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/hurt.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/ip_cloaking.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/ip_cloaking_3.0.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/ip_cloaking_4.0.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/ip_cloaking_old.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_42.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_adminwall.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_findforwards.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_identify.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_mkpasswd.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_ojoin.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_okick.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_olist.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_omode.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_opme.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_remove.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_roleplay.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_sendbans.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/m_webirc.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/no_locops.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/no_oper_invis.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/override.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/sno_farconnect.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/sno_globalkline.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/sno_globaloper.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/sno_whois.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/spy_admin_notice.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/spy_info_notice.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/spy_links_notice.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/spy_motd_notice.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/spy_stats_notice.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/spy_stats_p_notice.so
file path=$(USRDIR)/lib/charybdis/modules/extensions/spy_trace_notice.so
file path=$(USRDIR)/lib/charybdis/modules/m_ban.so
file path=$(USRDIR)/lib/charybdis/modules/m_die.so
file path=$(USRDIR)/lib/charybdis/modules/m_error.so
file path=$(USRDIR)/lib/charybdis/modules/m_join.so
file path=$(USRDIR)/lib/charybdis/modules/m_kick.so
file path=$(USRDIR)/lib/charybdis/modules/m_kill.so
file path=$(USRDIR)/lib/charybdis/modules/m_message.so
file path=$(USRDIR)/lib/charybdis/modules/m_mode.so
file path=$(USRDIR)/lib/charybdis/modules/m_nick.so
file path=$(USRDIR)/lib/charybdis/modules/m_part.so
file path=$(USRDIR)/lib/charybdis/modules/m_quit.so
file path=$(USRDIR)/lib/charybdis/modules/m_server.so
file path=$(USRDIR)/lib/charybdis/modules/m_squit.so
file path=$(USRDIR)/lib/charybdis/ssld
file path=$(USRDIR)/lib/charybdis/vimotd
file path=$(USRDIR)/lib/libratbox.so
file path=$(USRDIR)/lib/pkgconfig/libratbox.pc
file path=$(USRDIR)/share/doc/charybdis/opers/accept
file path=$(USRDIR)/share/doc/charybdis/opers/admin
file path=$(USRDIR)/share/doc/charybdis/opers/away
file path=$(USRDIR)/share/doc/charybdis/opers/capab
file path=$(USRDIR)/share/doc/charybdis/opers/challenge
file path=$(USRDIR)/share/doc/charybdis/opers/chantrace
file path=$(USRDIR)/share/doc/charybdis/opers/close
file path=$(USRDIR)/share/doc/charybdis/opers/cmode
file path=$(USRDIR)/share/doc/charybdis/opers/cnotice
file path=$(USRDIR)/share/doc/charybdis/opers/connect
file path=$(USRDIR)/share/doc/charybdis/opers/cprivmsg
file path=$(USRDIR)/share/doc/charybdis/opers/credits
file path=$(USRDIR)/share/doc/charybdis/opers/die
file path=$(USRDIR)/share/doc/charybdis/opers/dline
file path=$(USRDIR)/share/doc/charybdis/opers/error
file path=$(USRDIR)/share/doc/charybdis/opers/etrace
file path=$(USRDIR)/share/doc/charybdis/opers/extban
file path=$(USRDIR)/share/doc/charybdis/opers/help
file path=$(USRDIR)/share/doc/charybdis/opers/index
file path=$(USRDIR)/share/doc/charybdis/opers/info
file path=$(USRDIR)/share/doc/charybdis/opers/invite
file path=$(USRDIR)/share/doc/charybdis/opers/ison
file path=$(USRDIR)/share/doc/charybdis/opers/join
file path=$(USRDIR)/share/doc/charybdis/opers/kick
file path=$(USRDIR)/share/doc/charybdis/opers/kill
file path=$(USRDIR)/share/doc/charybdis/opers/kline
file path=$(USRDIR)/share/doc/charybdis/opers/knock
file path=$(USRDIR)/share/doc/charybdis/opers/links
file path=$(USRDIR)/share/doc/charybdis/opers/list
file path=$(USRDIR)/share/doc/charybdis/opers/locops
file path=$(USRDIR)/share/doc/charybdis/opers/lusers
file path=$(USRDIR)/share/doc/charybdis/opers/map
file path=$(USRDIR)/share/doc/charybdis/opers/masktrace
file path=$(USRDIR)/share/doc/charybdis/opers/modlist
file path=$(USRDIR)/share/doc/charybdis/opers/modload
file path=$(USRDIR)/share/doc/charybdis/opers/modreload
file path=$(USRDIR)/share/doc/charybdis/opers/modrestart
file path=$(USRDIR)/share/doc/charybdis/opers/modunload
file path=$(USRDIR)/share/doc/charybdis/opers/motd
file path=$(USRDIR)/share/doc/charybdis/opers/names
file path=$(USRDIR)/share/doc/charybdis/opers/nick
file path=$(USRDIR)/share/doc/charybdis/opers/notice
file path=$(USRDIR)/share/doc/charybdis/opers/oper
file path=$(USRDIR)/share/doc/charybdis/opers/operspy
file path=$(USRDIR)/share/doc/charybdis/opers/operwall
file path=$(USRDIR)/share/doc/charybdis/opers/part
file path=$(USRDIR)/share/doc/charybdis/opers/pass
file path=$(USRDIR)/share/doc/charybdis/opers/ping
file path=$(USRDIR)/share/doc/charybdis/opers/pong
file path=$(USRDIR)/share/doc/charybdis/opers/post
file path=$(USRDIR)/share/doc/charybdis/opers/privmsg
file path=$(USRDIR)/share/doc/charybdis/opers/privs
file path=$(USRDIR)/share/doc/charybdis/opers/quit
file path=$(USRDIR)/share/doc/charybdis/opers/rehash
file path=$(USRDIR)/share/doc/charybdis/opers/restart
file path=$(USRDIR)/share/doc/charybdis/opers/resv
file path=$(USRDIR)/share/doc/charybdis/opers/scan
file path=$(USRDIR)/share/doc/charybdis/opers/server
file path=$(USRDIR)/share/doc/charybdis/opers/set
file path=$(USRDIR)/share/doc/charybdis/opers/sjoin
file path=$(USRDIR)/share/doc/charybdis/opers/snomask
file path=$(USRDIR)/share/doc/charybdis/opers/squit
file path=$(USRDIR)/share/doc/charybdis/opers/stats
file path=$(USRDIR)/share/doc/charybdis/opers/svinfo
file path=$(USRDIR)/share/doc/charybdis/opers/testgecos
file path=$(USRDIR)/share/doc/charybdis/opers/testline
file path=$(USRDIR)/share/doc/charybdis/opers/testmask
file path=$(USRDIR)/share/doc/charybdis/opers/time
file path=$(USRDIR)/share/doc/charybdis/opers/topic
file path=$(USRDIR)/share/doc/charybdis/opers/trace
file path=$(USRDIR)/share/doc/charybdis/opers/uhelp
file path=$(USRDIR)/share/doc/charybdis/opers/umode
file path=$(USRDIR)/share/doc/charybdis/opers/undline
file path=$(USRDIR)/share/doc/charybdis/opers/unkline
file path=$(USRDIR)/share/doc/charybdis/opers/unreject
file path=$(USRDIR)/share/doc/charybdis/opers/unresv
file path=$(USRDIR)/share/doc/charybdis/opers/unxline
file path=$(USRDIR)/share/doc/charybdis/opers/user
file path=$(USRDIR)/share/doc/charybdis/opers/userhost
file path=$(USRDIR)/share/doc/charybdis/opers/users
file path=$(USRDIR)/share/doc/charybdis/opers/version
file path=$(USRDIR)/share/doc/charybdis/opers/wallops
file path=$(USRDIR)/share/doc/charybdis/opers/who
file path=$(USRDIR)/share/doc/charybdis/opers/whois
file path=$(USRDIR)/share/doc/charybdis/opers/whowas
file path=$(USRDIR)/share/doc/charybdis/opers/xline
file path=$(USRDIR)/share/doc/charybdis/users/index
file path=$(USRDIR)/share/doc/charybdis/users/info
file path=$(USRDIR)/share/doc/charybdis/users/notice
file path=$(USRDIR)/share/doc/charybdis/users/privmsg
file path=$(USRDIR)/share/doc/charybdis/users/stats
file path=$(USRDIR)/share/doc/charybdis/users/umode
file path=$(USRDIR)/share/man/man8/ircd.8
file path=$(SYSCONFDIR)/charybdis/ircd.conf
file path=$(SYSCONFDIR)/charybdis/ircd.motd
file path=$(SYSCONFDIR)/charybdis/reference.conf
hardlink path=$(USRDIR)/lib/charybdis/viconf target=vimotd
link path=$(USRDIR)/share/doc/charybdis/users/accept \
    target=/ec/share/doc/charybdis/opers/accept
link path=$(USRDIR)/share/doc/charybdis/users/admin \
    target=/ec/share/doc/charybdis/opers/admin
link path=$(USRDIR)/share/doc/charybdis/users/away \
    target=/ec/share/doc/charybdis/opers/away
link path=$(USRDIR)/share/doc/charybdis/users/challenge \
    target=/ec/share/doc/charybdis/opers/challenge
link path=$(USRDIR)/share/doc/charybdis/users/chantrace \
    target=/ec/share/doc/charybdis/opers/chantrace
link path=$(USRDIR)/share/doc/charybdis/users/cmode \
    target=/ec/share/doc/charybdis/opers/cmode
link path=$(USRDIR)/share/doc/charybdis/users/cnotice \
    target=/ec/share/doc/charybdis/opers/cnotice
link path=$(USRDIR)/share/doc/charybdis/users/cprivmsg \
    target=/ec/share/doc/charybdis/opers/cprivmsg
link path=$(USRDIR)/share/doc/charybdis/users/credits \
    target=/ec/share/doc/charybdis/opers/credits
link path=$(USRDIR)/share/doc/charybdis/users/error \
    target=/ec/share/doc/charybdis/opers/error
link path=$(USRDIR)/share/doc/charybdis/users/extban \
    target=/ec/share/doc/charybdis/opers/extban
link path=$(USRDIR)/share/doc/charybdis/users/help \
    target=/ec/share/doc/charybdis/opers/help
link path=$(USRDIR)/share/doc/charybdis/users/invite \
    target=/ec/share/doc/charybdis/opers/invite
link path=$(USRDIR)/share/doc/charybdis/users/ison \
    target=/ec/share/doc/charybdis/opers/ison
link path=$(USRDIR)/share/doc/charybdis/users/join \
    target=/ec/share/doc/charybdis/opers/join
link path=$(USRDIR)/share/doc/charybdis/users/kick \
    target=/ec/share/doc/charybdis/opers/kick
link path=$(USRDIR)/share/doc/charybdis/users/knock \
    target=/ec/share/doc/charybdis/opers/knock
link path=$(USRDIR)/share/doc/charybdis/users/links \
    target=/ec/share/doc/charybdis/opers/links
link path=$(USRDIR)/share/doc/charybdis/users/list \
    target=/ec/share/doc/charybdis/opers/list
link path=$(USRDIR)/share/doc/charybdis/users/lusers \
    target=/ec/share/doc/charybdis/opers/lusers
link path=$(USRDIR)/share/doc/charybdis/users/map \
    target=/ec/share/doc/charybdis/opers/map
link path=$(USRDIR)/share/doc/charybdis/users/motd \
    target=/ec/share/doc/charybdis/opers/motd
link path=$(USRDIR)/share/doc/charybdis/users/names \
    target=/ec/share/doc/charybdis/opers/names
link path=$(USRDIR)/share/doc/charybdis/users/nick \
    target=/ec/share/doc/charybdis/opers/nick
link path=$(USRDIR)/share/doc/charybdis/users/oper \
    target=/ec/share/doc/charybdis/opers/oper
link path=$(USRDIR)/share/doc/charybdis/users/part \
    target=/ec/share/doc/charybdis/opers/part
link path=$(USRDIR)/share/doc/charybdis/users/pass \
    target=/ec/share/doc/charybdis/opers/pass
link path=$(USRDIR)/share/doc/charybdis/users/ping \
    target=/ec/share/doc/charybdis/opers/ping
link path=$(USRDIR)/share/doc/charybdis/users/pong \
    target=/ec/share/doc/charybdis/opers/pong
link path=$(USRDIR)/share/doc/charybdis/users/quit \
    target=/ec/share/doc/charybdis/opers/quit
link path=$(USRDIR)/share/doc/charybdis/users/time \
    target=/ec/share/doc/charybdis/opers/time
link path=$(USRDIR)/share/doc/charybdis/users/topic \
    target=/ec/share/doc/charybdis/opers/topic
link path=$(USRDIR)/share/doc/charybdis/users/trace \
    target=/ec/share/doc/charybdis/opers/trace
link path=$(USRDIR)/share/doc/charybdis/users/user \
    target=/ec/share/doc/charybdis/opers/user
link path=$(USRDIR)/share/doc/charybdis/users/userhost \
    target=/ec/share/doc/charybdis/opers/userhost
link path=$(USRDIR)/share/doc/charybdis/users/users \
    target=/ec/share/doc/charybdis/opers/users
link path=$(USRDIR)/share/doc/charybdis/users/version \
    target=/ec/share/doc/charybdis/opers/version
link path=$(USRDIR)/share/doc/charybdis/users/who \
    target=/ec/share/doc/charybdis/opers/who
link path=$(USRDIR)/share/doc/charybdis/users/whois \
    target=/ec/share/doc/charybdis/opers/whois
link path=$(USRDIR)/share/doc/charybdis/users/whowas \
    target=/ec/share/doc/charybdis/opers/whowas

file files/charybdis-manifest.xml path=$(SVCMANIFEST)/site/charybdis.xml \
    restart_fmri=svc:/system/manifest-import:default
file files/charybdis-startup.sh \
    path=$(SVCMETHOD)/charybdis mode=0555
